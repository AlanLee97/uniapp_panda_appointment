(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/publish/publish-appointment"],{1881:function(e,t,a){"use strict";var i=a("cbf1"),n=a.n(i);n.a},"85b3":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},"87ec":function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){return Promise.all([a.e("common/vendor"),a.e("components/w-picker/w-picker")]).then(a.bind(null,"2f0a"))},l={components:{wPicker:n},data:function(){return{br:"\n",imageList:[],tabIndex:0,aptTypeArr:["普通拍照","毕业照","婚纱照","电商模特"],index:0,sendData:{userId:0,title:"",ask:"",apt_type:"",apt_date:"",apt_site:"",apt_image:"",apt_fee:0},startYear:(new Date).getFullYear(),mode:"range",defaultVal:[0,0,0,0,0,0,0],tabList:[{mode:"limit",name:"约拍日期"},{mode:"region",name:"选择地点"}],resultInfo:{pickDate:"",pickSite:""},linkList:[{label:"浙江省",value:"10",children:[{label:"杭州市",value:"1010",children:[{label:"滨江区",value:"10101"},{label:"萧山区",value:"10102"}]},{label:"宁波市",value:"1012",children:[{label:"海曙区",value:"10121"},{label:"鄞州区",value:"10122"}]}]},{label:"广东省",value:"20",children:[{label:"广州市",value:"2010",children:[{label:"广州1区",value:"20101"},{label:"广州2区",value:"20102"}]},{label:"深圳市",value:"2012",children:[{label:"深圳1区",value:"20121"},{label:"深圳2区",value:"20122"}]}]}]}},onLoad:function(){},onShow:function(){var e=this.getUserInfo(),t=e.id;this.sendData.userId=t},methods:{bindPickerChange:function(t){console.log(e(t," at pages\\publish\\publish-appointment.vue:242")),console.log(e("picker发送选择改变，携带值为",t.target.value," at pages\\publish\\publish-appointment.vue:243")),this.index=t.target.value;var a=t.target.value,i=this.aptTypeArr[t.target.value];console.log(e("index:"+a+", type:"+i," at pages\\publish\\publish-appointment.vue:247")),this.sendData.apt_type=this.aptTypeArr[t.target.value]},close:function(e){this.imageList.splice(e,1)},chooseImg:function(){var t=this;i.chooseImage({sourceType:["camera","album"],count:1-this.imageList.length,success:function(a){t.imageList=t.imageList.concat(a.tempFilePaths),console.log(e(t.imageList," at pages\\publish\\publish-appointment.vue:261"))}})},uploadImage:function(){var t=this;i.showLoading({title:"发布中..."}),i.uploadFile({url:this.createApiUrl("/upload/return-url"),filePath:this.imageList[0],name:"file",formData:{uid:this.sendData.userId},success:function(a){console.log(e("上传成功的回调函数"," at pages\\publish\\publish-appointment.vue:279")),console.log(e(a," at pages\\publish\\publish-appointment.vue:280")),t.sendData.apt_image=a.data,t.sendRequest()},fail:function(t){console.log(e(t," at pages\\publish\\publish-appointment.vue:288")),i.showToast({title:"发表失败，原因：图片上传失败。"})},complete:function(){i.hideLoading()}})},previewImage:function(){i.previewImage({urls:this.imageList})},publishAppointment:function(){this.uploadImage()},sendRequest:function(){i.showLoading({title:"正在发布"}),i.request({url:this.createApiUrl("appointment/add"),method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:this.sendData,success:function(t){console.log(e(t," at pages\\publish\\publish-appointment.vue:326")),i.hideLoading(),200==t.data.code?(i.showToast({title:"发布成功"}),i.switchTab({url:"/pages/tabbar/tabbar-1/tabbar-1"})):i.showToast({title:"发布失败，请稍候再试！"})},fail:function(){},complete:function(){i.hideLoading()}})},toggleTab:function(e,t){this.tabIndex=t,this.mode=e.mode,this.defaultVal=e.value,this.$refs[e.mode].show()},onConfirm:function(t){switch(console.log(e(t," at pages\\publish\\publish-appointment.vue:358")),this.mode){case"limit":this.resultInfo.pickDate=t,this.sendData.apt_date=t.result;break;case"region":this.resultInfo.pickSite=t,this.sendData.apt_site=t.result;break}}}};t.default=l}).call(this,a("0de9")["default"],a("6e42")["default"])},ab14:function(e,t,a){"use strict";(function(e){a("8f0e"),a("921b");i(a("66fd"));var t=i(a("fc3b"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},cbf1:function(e,t,a){},d9f6:function(e,t,a){"use strict";a.r(t);var i=a("87ec"),n=a.n(i);for(var l in i)"default"!==l&&function(e){a.d(t,e,function(){return i[e]})}(l);t["default"]=n.a},fc3b:function(e,t,a){"use strict";a.r(t);var i=a("85b3"),n=a("d9f6");for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);a("1881");var s=a("2877"),o=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);t["default"]=o.exports}},[["ab14","common/runtime","common/vendor"]]]);